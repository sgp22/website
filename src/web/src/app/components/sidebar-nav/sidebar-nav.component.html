<aside class="sidebar sidebar--cms">
  <nav class="sidebar-nav-list">

    <ul class="ids-list ids-list--hover">
      <li><a class="ids-list--item" routerLink="{{section}}" routerLinkActive="ids-list--item--selected" [routerLinkActiveOptions]="{exact: true}">{{sectionTitle}}</a></li>
      <ng-container *ngFor="let child of sidebarNav; let i = index">

        <li>
          <span *ngIf="child.children && child.children.length > 0" (click)="helpers.toggleAccordion(i, expandedLevel1)" class="ids-list--heading-accordion ids-list--heading-accordion--active" [class.ids-list--heading-accordion--active]="!expandedLevel1[i]">
            {{child.title}}
            <svg class="ids-icon" focusable="false" aria-hidden="true" role="presentation">
              <use xlink:href="#icon_expand"></use>
            </svg>
          </span>

          <a *ngIf="child.children.length <= 0" class="ids-list--item" routerLink="{{section}}/{{child.slug}}" routerLinkActive="ids-list--item--selected">{{child.title}}</a>

          <ul class="ids-list ids-list--expandable" [class.ids-list--expanded]="!expandedLevel1[i]">
            <li *ngFor="let level_2 of child.children; let i = index">

              <a *ngIf="level_2.children.length <= 0" class="ids-list--item" routerLinkActive="ids-list--item--selected" routerLink="{{level_2.relative_url}}">
                {{level_2.title}}
              </a>

              <span *ngIf="level_2.children && level_2.children.length > 0" class="ids-list--item ids-list--heading ids-list--heading-accordion--active">
                {{level_2.title}}
              </span>

              <ul class="ids-list ids-list--expandable ids-list--expanded">
                <li *ngFor="let level_3 of level_2.children">
                  <a class="ids-list--item" routerLinkActive="ids-list--item--selected" routerLink="{{level_3.relative_url}}">{{level_3.title}}</a>
                </li>
              </ul>

            </li>
          </ul>
        </li>

      </ng-container>

    </ul>
  </nav>
</aside>
